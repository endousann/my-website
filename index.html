<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>1年・ダンジョン</title>
<link href="https://fonts.googleapis.com/css2?family=DotGothic16&display=swap" rel="stylesheet">
<style>
* { box-sizing: border-box; }

body {
  font-family: 'DotGothic16', monospace;
  margin:0; padding:0;
  background:#f9f9f9; color:#333;
}

/* 🎨 ヘッダー */
header {
  text-align:center;
  padding:2rem 1rem 1rem;
  background:#222;
  color:white;
}

/* 🌈 ロゴ画像を大きく中央に */
.logo {
  display:block;
  margin:0 auto;
  max-width:550px;
  height:auto;
  filter: drop-shadow(0 0 10px rgba(255,255,255,0.7));
}

main {
  padding:1rem;
  max-width:600px;
  margin:0 auto;
  width:100%;
}

h2 { margin:1rem 0; text-align:center; }

/* 🌸 ボタン（カード風） */
.button {
  display:inline-block;
  margin:0.8rem auto;
  padding:1rem 1.5rem;
  background:white;
  color:#e91e63;
  text-decoration:none;
  border-radius:12px;
  box-shadow:0 4px 10px rgba(0,0,0,0.1);
  text-align:center;
  font-weight:bold;
  transition: all 0.3s ease;
  border: 2px solid #e91e63;
}
.button:hover {
  transform: translateY(-5px);
  box-shadow:0 6px 14px rgba(0,0,0,0.2);
  background:#e91e63;
  color:white;
}

#vote-message {
  color:red;
  font-weight:bold;
  margin-top:10px;
  text-align:center;
}

iframe {
  width:100%;
  max-width:100%;
  height:340px;
  border-radius:10px;
  display:block;
}

section { margin-bottom:2rem; }

/* 🍩 チュロス告知カード */
.churros-card {
  background: white;
  border-radius: 12px;
  box-shadow: 0 4px 8px rgba(0,0,0,0.1);
  overflow: hidden;
  text-align: center;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
.churros-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 6px 14px rgba(0,0,0,0.15);
}
.churros-card img {
  width: 100%;
  height: auto;
  display: block;
}
.churros-card h3 {
  margin: 0.8rem 0 0.4rem;
  font-size: 1.4rem;
  color: #e67e22;
}
.churros-card p {
  padding: 0 1rem 1rem;
  color: #555;
  font-size: 0.95rem;
}

/* ✅ フッター修正版 */
footer {
  background: #222;
  color: white;
  text-align: center;
  padding: 2rem 1rem;
  margin-top: 3rem;
  border-top: 2px solid #444;
}

footer hr {
  border: none;
  border-top: 1px solid #444;
  width: 80%;
  margin: 10px auto 20px;
}

footer a {
  color: #fff;
  text-decoration: underline;
}

footer p {
  margin: 0.5rem 0;
  line-height: 1.5;
}

/* 🔒 リセットボタン（非表示） */
#reset-votes {
  display: none;
  background: #444;
  color: white;
  border: none;
  border-radius: 8px;
  padding: 10px 20px;
  margin: 10px auto;
  cursor: pointer;
}
#reset-votes:hover {
  background: #e91e63;
}

/* スマホ最適化 */
@media(max-width:768px){
  h2 { font-size:1.3rem; }
  .button { width:100%; padding:12px; font-size:1rem; margin-bottom:8px; }
  #vote-message { font-size:0.95rem; }
  .logo { max-width:250px; }
}
</style>
</head>
<body>
<header>
  <img src="images/ろごちゃん.png" alt="1年・ダンジョン ロゴ" class="logo">
</header>

<main>
  <!-- 1️⃣ 投票セクション -->
  <section class="vote-section">
    <h2 style="font-size:1.8rem;">🎯 投票はこちら！ 🎯</h2>
    <a href="ranking.html" id="vote-link" class="button">投票する</a>
    <p id="vote-message"></p>
    <!-- 管理用リセットボタン（Shift+Rで出る） -->
    <button id="reset-votes">投票データをリセット</button>
  </section>

  <section class="video-section">
  <h2>📹 1年生紹介</h2>
  <a href="https://youtube.com/shorts/QwjwcNWaS_A?si=TeHQgZ0dFDmJeauk" target="_blank" class="button">
    1年生紹介動画を見る
  </a>
</section>


  <!-- 3️⃣ その他展示作品へのリンク -->
  <section class="portfolio-section">
    <h2>🎨 展示作品 🎨</h2>
    <a href="portfolio.html" class="button">展示一覧を見る</a>
  </section>

  <!-- 🍩 4️⃣ チュロス告知カード -->
  <section class="churros-section">
    <div class="churros-card">
      <a href="churros.html" style="text-decoration:none; color:inherit;">
        <img src="images/churros.jpg" alt="スイーツの鉄板焼き!? 焼きチュロス＆スイートポテト">
        <h3>🍩 スイーツの鉄板焼き!? 🍠</h3>
        <p>焼きチュロス＆スイートポテトが登場！<br>
        外はカリッと中はふんわり✨<br>
        文化祭限定メニューをぜひ味わってください！</p>
      </a>
    </div>
  </section>
</main>

<footer>
  <p>© 2025 1年サイト製作組</p>
  <hr>
  <p><a href="privacy.html">プライバシーポリシー</a></p>
  <p>製作者：1年遠藤福久・1年大友虎牙</p>
</footer>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.13.0/firebase-database.js"></script>

<script>
// Firebase設定
const firebaseConfig = {
  databaseURL: "https://danjonn-f9f66-default-rtdb.firebaseio.com/"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// ローカル投票制御
const voteLink = document.getElementById("vote-link");
const voteMessage = document.getElementById("vote-message");
const hasVoted = localStorage.getItem("hasVoted") === "true";

if (hasVoted) {
  voteLink.addEventListener("click", e => { 
    e.preventDefault(); 
    alert("すでに投票済みです。"); 
  });
  voteLink.style.cursor = "not-allowed";
  voteLink.style.backgroundColor = "#ccc";
  voteLink.style.color = "#666";
  voteLink.style.borderColor = "#aaa";
  voteMessage.innerHTML = "あなたはすでに投票済みです。<br>投票ページには行けません。";
}

// 🔒 投票リセットボタン（Shift + Rで表示）
const resetBtn = document.getElementById("reset-votes");
document.addEventListener("keydown", e => {
  if (e.shiftKey && e.key === "R") {
    resetBtn.style.display = "block";
  }
});
resetBtn.addEventListener("click", async () => {
  if (confirm("全員の投票データをリセットします。よろしいですか？")) {
    await db.ref("votes").remove();
    alert("投票データをリセットしました。");
  }
});
</script>
</body>
</html>
